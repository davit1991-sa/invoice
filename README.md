# Invoice & Compare Act Platform â€” Monorepo

áƒ”áƒ¡ áƒáƒ áƒ˜áƒ¡ **Batch 1**: áƒ›áƒáƒœáƒáƒ áƒ”áƒáƒáƒ¡ áƒ¡áƒáƒ¬áƒ§áƒ˜áƒ¡áƒ˜ áƒ˜áƒœáƒ¤áƒ áƒáƒ¡áƒ¢áƒ áƒ£áƒ¥áƒ¢áƒ£áƒ áƒ + Backend (NestJS/Fastify) áƒ¡áƒ™áƒ”áƒšáƒ”áƒ¢áƒáƒœáƒ˜ + Prisma schema (PostgreSQL).

## âœ… áƒ›áƒ˜áƒ–áƒáƒœáƒ˜
áƒáƒšáƒáƒ¢áƒ¤áƒáƒ áƒ›áƒ áƒ’áƒáƒœáƒ™áƒ£áƒ—áƒ•áƒœáƒ˜áƒšáƒ˜áƒ áƒ›áƒáƒ›áƒ®áƒ›áƒáƒ áƒ”áƒ‘áƒšáƒ”áƒ‘áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ (áƒ™áƒáƒ›áƒáƒáƒœáƒ˜áƒ/áƒ¤áƒ˜áƒ–áƒ˜áƒ™áƒ£áƒ áƒ˜ áƒáƒ˜áƒ áƒ˜/áƒ˜áƒœáƒ“. áƒ›áƒ”áƒ¬áƒáƒ áƒ›áƒ”), áƒ áƒáƒ› áƒ¡áƒ¬áƒ áƒáƒ¤áƒáƒ“ áƒ¨áƒ”áƒ¥áƒ›áƒœáƒáƒœ:
- áƒ˜áƒœáƒ•áƒáƒ˜áƒ¡áƒ”áƒ‘áƒ˜ (Invoice)
- áƒ•áƒáƒšáƒ˜áƒ¡ áƒ¨áƒ”áƒ“áƒáƒ áƒ”áƒ‘áƒ˜áƒ¡ áƒáƒ¥áƒ¢áƒ˜ (Compare Act)

áƒ“áƒ áƒ¨áƒ”áƒ«áƒšáƒáƒœ PDF-áƒ˜áƒ¡ áƒ©áƒáƒ›áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ•áƒ áƒáƒœ áƒ’áƒáƒ’áƒ–áƒáƒ•áƒœáƒ **Email/WhatsApp**-áƒ˜áƒ—.

---

## âš™ï¸ áƒáƒ áƒ©áƒ”áƒ£áƒšáƒ˜ áƒ¢áƒ”áƒ¥áƒœáƒáƒšáƒáƒ’áƒ˜áƒ”áƒ‘áƒ˜ (Batch 1-áƒ¨áƒ˜)
- Monorepo: **pnpm workspaces**
- Backend: **NestJS + Fastify**
- DB Access: **Prisma**
- DB: **PostgreSQL**
- Deploy: áƒ›áƒ˜áƒ–áƒœáƒáƒ‘áƒ áƒ˜áƒ•áƒáƒ“ **Railway** (API + DB), Frontend áƒ›áƒáƒ’áƒ•áƒ˜áƒáƒœáƒ”áƒ‘áƒ˜áƒ— (Batch 2+)

---

## ğŸ§© Assumptions (áƒ“áƒáƒ–áƒ£áƒ¡áƒ¢áƒ”áƒ‘áƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ áƒ”áƒ¨áƒ” áƒ›áƒ˜áƒ¦áƒ”áƒ‘áƒ£áƒšáƒ˜ áƒ’áƒáƒœáƒ˜áƒ•áƒ áƒ£áƒšáƒ˜ áƒ•áƒáƒ áƒáƒ£áƒ“áƒ”áƒ‘áƒ˜)
1) **Revenue Service (my.gov.ge) áƒ’áƒáƒ“áƒáƒ›áƒáƒ¬áƒ›áƒ”áƒ‘áƒ**: Batch 1-áƒ¨áƒ˜ áƒ›áƒ®áƒáƒšáƒáƒ“ **áƒ¡áƒ™áƒ”áƒšáƒ”áƒ¢áƒáƒœáƒ˜áƒ** â€” áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ áƒ“áƒáƒ”áƒ›áƒáƒ¢áƒ”áƒ‘áƒ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜ (API endpoint + scraping/official API áƒ›áƒ˜áƒ“áƒ’áƒáƒ›áƒ).
2) **WhatsApp áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ**: áƒáƒ áƒáƒ•áƒáƒ˜áƒ“áƒ”áƒ áƒ˜ áƒáƒ  áƒáƒ áƒ˜áƒ¡ áƒ’áƒáƒœáƒ¡áƒáƒ–áƒ¦áƒ•áƒ áƒ£áƒšáƒ˜ (Twilio/360dialog/Meta Cloud API). áƒáƒ›áƒ˜áƒ¢áƒáƒ› Batch 1-áƒ¨áƒ˜ áƒ•áƒ¢áƒáƒ•áƒ”áƒ‘áƒ— áƒ’áƒáƒ áƒ”áƒ›áƒáƒ¡ áƒªáƒ•áƒšáƒáƒ“áƒ”áƒ‘áƒ˜áƒ¡ áƒ©áƒáƒ áƒ©áƒáƒ¡ áƒ“áƒ â€œproviderâ€ áƒáƒ‘áƒ¡áƒ¢áƒ áƒáƒ¥áƒªáƒ˜áƒáƒ¡ áƒ“áƒáƒ•áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ— áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜.
3) **TBC Payment**: Batch 1-áƒ¨áƒ˜ áƒ›áƒ®áƒáƒšáƒáƒ“ placeholder env-áƒ”áƒ‘áƒ˜áƒ; áƒ áƒ”áƒáƒšáƒ£áƒ áƒ˜ áƒ˜áƒœáƒ¢áƒ”áƒ’áƒ áƒáƒªáƒ˜áƒ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜.
4) **OTP**: áƒ›áƒáƒ—áƒ®áƒáƒ•áƒœáƒ˜áƒ— OTP áƒ£áƒœáƒ“áƒ áƒ’áƒáƒ˜áƒ’áƒ–áƒáƒ•áƒœáƒáƒ¡ email/whatsapp-áƒ–áƒ” áƒ“áƒ DB-áƒ¨áƒ˜ áƒ¨áƒ”áƒ˜áƒœáƒáƒ®áƒáƒ¡ áƒ°áƒ”áƒ¨áƒ˜áƒ áƒ”áƒ‘áƒ£áƒšáƒ˜; áƒ áƒ”áƒáƒšáƒ˜áƒ–áƒáƒªáƒ˜áƒ áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜.
5) **99.9% availability / 1000 concurrent**: áƒáƒ›áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡ áƒ“áƒáƒ’áƒ”áƒ’áƒ›áƒ˜áƒšáƒ˜áƒ stateless API, health checks, DB connection pooling, rate limit, caching; Batch 1-áƒ¨áƒ˜ áƒ›áƒ®áƒáƒšáƒáƒ“ health endpoint + áƒ¡áƒ¬áƒáƒ áƒ˜ scaffold.

---

## ğŸš€ Local Run (áƒ“áƒ”áƒ•áƒ”áƒšáƒáƒáƒ›áƒ”áƒœáƒ¢áƒ˜)
> áƒ’áƒ­áƒ˜áƒ áƒ“áƒ”áƒ‘áƒáƒ— áƒ›áƒ®áƒáƒšáƒáƒ“ Node.js + pnpm (áƒ“áƒ áƒ¡áƒ£áƒ áƒ•áƒ˜áƒšáƒ˜áƒ¡áƒáƒ›áƒ”áƒ‘áƒ  Docker Postgres-áƒ˜áƒ¡áƒ—áƒ•áƒ˜áƒ¡)

1) DB áƒ’áƒáƒ£áƒ¨áƒ•áƒ˜áƒ—:
```bash
pnpm db:up
```

2) Backend env:
- áƒ“áƒáƒáƒ™áƒáƒáƒ˜áƒ áƒ”áƒ— `.env.example` â†’ `.env`
- áƒ¨áƒ”áƒªáƒ•áƒáƒšáƒ”áƒ— áƒ›áƒ˜áƒœáƒ˜áƒ›áƒ£áƒ› `DATABASE_URL`

3) Backend dependencies:
```bash
pnpm -C apps/api install
```

4) Prisma:
```bash
pnpm -C apps/api prisma generate
```

5) Run API (dev):
```bash
pnpm -C apps/api dev
```

API health:
- `GET http://localhost:3001/health`

---

## ğŸŒ Deploy (Chrome-only, GitHub + Railway) â€” Batch 1 Instructions

### A) GitHub-áƒ–áƒ” áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ•áƒ (ZIP-áƒ“áƒáƒœ, áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ—áƒ˜ áƒáƒáƒ”áƒ‘áƒ˜áƒ¡ áƒ’áƒáƒ áƒ”áƒ¨áƒ”)
1) áƒ’áƒáƒ®áƒ¡áƒ”áƒœáƒ˜áƒ— GitHub â†’ áƒ¨áƒ”áƒ¥áƒ›áƒ”áƒœáƒ˜áƒ— áƒáƒ®áƒáƒšáƒ˜ Repository (Private áƒáƒœ Public).
2) Repo áƒ’áƒ•áƒ”áƒ áƒ“áƒ–áƒ” áƒ“áƒáƒáƒ­áƒ˜áƒ áƒ”áƒ— **Add file â†’ Upload files**.
3) ZIP **áƒáƒ ** áƒ˜áƒ“áƒ”áƒ‘áƒ áƒáƒ˜áƒ áƒ“áƒáƒáƒ˜áƒ  â€” áƒ¯áƒ”áƒ  ZIP áƒ’áƒáƒ®áƒ¡áƒ”áƒœáƒ˜áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ¡ áƒ™áƒáƒ›áƒáƒ˜áƒ£áƒ¢áƒ”áƒ áƒ¨áƒ˜ áƒ“áƒ áƒáƒ¢áƒ•áƒ˜áƒ áƒ—áƒ”áƒ— áƒ¤áƒáƒšáƒ“áƒ”áƒ áƒ˜áƒ¡ áƒ¨áƒ˜áƒ’áƒ—áƒáƒ•áƒ¡áƒ˜ (áƒáƒœ drag&drop).
4) áƒ“áƒáƒáƒ­áƒ˜áƒ áƒ”áƒ— **Commit changes**.

> áƒ—áƒ£ áƒ›áƒ®áƒáƒšáƒáƒ“ ZIP áƒ’áƒáƒ¥áƒ•áƒ— áƒ“áƒ áƒ•áƒ”áƒ  áƒ’áƒáƒ®áƒ¡áƒœáƒ˜áƒ—: Windows-áƒ¨áƒ˜ â€œExtract Allâ€¦â€ áƒ’áƒáƒ›áƒáƒ˜áƒ§áƒ”áƒœáƒ”áƒ— (áƒ”áƒ¡ áƒ“áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ˜áƒ— áƒáƒáƒ¡ áƒáƒ  áƒ˜áƒ—áƒ®áƒáƒ•áƒ¡).

### B) Railway-áƒ–áƒ” DB (PostgreSQL) áƒ¨áƒ”áƒ¥áƒ›áƒœáƒ
1) railway.app â†’ New Project
2) **Provision PostgreSQL** (Add Plugin/Database).
3) DB-áƒ˜áƒ¡ settings-áƒ¨áƒ˜ áƒœáƒáƒ®áƒáƒ•áƒ— `DATABASE_URL`-áƒ¡.

### C) Railway-áƒ–áƒ” API Deploy
1) Railway Project â†’ **New Service â†’ GitHub Repo**
2) áƒáƒ˜áƒ áƒ©áƒ˜áƒ”áƒ— áƒ—áƒ¥áƒ•áƒ”áƒœáƒ˜ repo.
3) Root directory: `/` (áƒ©áƒ•áƒ”áƒœáƒ˜ repo root)
4) Service Settings:
   - **Start Command** (áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜ áƒ“áƒáƒ•áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ— áƒ¡áƒ áƒ£áƒš build pipeline-áƒ¡; áƒáƒ®áƒšáƒ dev-áƒ¡ áƒáƒ  áƒ•áƒ˜áƒ§áƒ”áƒœáƒ”áƒ‘áƒ— production-áƒ¨áƒ˜)
5) Variables (Railway â†’ Variables) áƒ“áƒáƒáƒ›áƒáƒ¢áƒ”áƒ—:
   - `DATABASE_URL` (Railway Postgres-áƒ˜áƒ“áƒáƒœ)
   - `API_PORT` (Railway áƒáƒ•áƒ¢áƒáƒ›áƒáƒ¢áƒ£áƒ áƒáƒ“ áƒáƒ«áƒšáƒ”áƒ•áƒ¡ `$PORT`; áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜ áƒ¡áƒ™áƒ áƒ˜áƒáƒ¢áƒ”áƒ‘áƒ¨áƒ˜ áƒ’áƒáƒ•áƒ˜áƒ—áƒ•áƒáƒšáƒ˜áƒ¡áƒ¬áƒ˜áƒœáƒ”áƒ‘áƒ—)
   - `JWT_ACCESS_SECRET`, `JWT_REFRESH_SECRET` áƒ“áƒ áƒ¡áƒ®áƒ•.

> áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ¨áƒ˜ áƒ“áƒáƒ•áƒáƒ›áƒáƒ¢áƒ”áƒ‘áƒ— Railway-friendly scripts-áƒ¡: `build` â†’ `start:prod`.

---

## ğŸ“Œ Batch 1 Status
- Monorepo scaffold âœ…
- API bootstrap âœ…
- Prisma schema (áƒ¡áƒáƒ¬áƒ§áƒ˜áƒ¡áƒ˜) âœ…

áƒ¨áƒ”áƒ›áƒ“áƒ”áƒ’ áƒ‘áƒ”áƒ©áƒ”áƒ‘áƒ¨áƒ˜ áƒ“áƒáƒ”áƒ›áƒáƒ¢áƒ”áƒ‘áƒ:
- Frontend (Next.js + Tailwind + shadcn/ui)
- Auth (JWT + Refresh + OTP)
- Clients/Invoices/Acts CRUD
- PDF generation + email/whatsapp sending
- Subscription + TBC payment
- Admin panel
